!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("@angular/core"),require("@angular/common/http"),require("rxjs/operators"),require("rxjs"),require("rxjs/webSocket"),require("@angular/router"),require("@angular/common"),require("ngx-moment"),require("ts-md5")):"function"==typeof define&&define.amd?define("utilidades-core",["exports","@angular/core","@angular/common/http","rxjs/operators","rxjs","rxjs/webSocket","@angular/router","@angular/common","ngx-moment","ts-md5"],o):o((e=e||self)["utilidades-core"]={},e.ng.core,e.ng.common.http,e.rxjs.operators,e.rxjs,e.rxjs.webSocket,e.ng.router,e.ng.common,e.ngxMoment,e.tsMd5)}(this,function(e,o,t,i,n,a,r,s,c,l){"use strict";var p=function(){return(p=Object.assign||function(e){for(var o,t=1,i=arguments.length;t<i;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);return e}).apply(this,arguments)};function d(e,o){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,n,a=t.call(e),r=[];try{for(;(void 0===o||o-- >0)&&!(i=a.next()).done;)r.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(t=a.return)&&t.call(a)}finally{if(n)throw n.error}}return r}function u(){for(var e=[],o=0;o<arguments.length;o++)e=e.concat(d(arguments[o]));return e}var f=function(){function e(e){this.http=e,this.httpOptions={headers:new t.HttpHeaders({Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("access_token")})}}return e.prototype.setPath=function(e){this.path=e},e.prototype.get=function(e){return this.http.get(""+this.path+e,this.httpOptions).pipe(i.map(function(e){return e.hasOwnProperty("Body")?e.Body:e}))},e.prototype.post=function(e,o){return this.http.post(""+this.path+e,o,this.httpOptions)},e.prototype.put=function(e,o){return this.http.put(""+this.path+e+"/"+o.Id,o,this.httpOptions)},e.prototype.delete=function(e,o){return this.http.delete(""+this.path+e+"/"+o,this.httpOptions)},e.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:t.HttpClient}]},e.ngInjectableDef=o.ɵɵdefineInjectable({factory:function(){return new e(o.ɵɵinject(t.HttpClient))},token:e,providedIn:"root"}),e}();var m=function(){function e(e){var o=this;this.confService=e,this.NOTIFICACION_SERVICE="",this.TIME_PING=3e4,this.noNotifySubject=new n.Subject,this.noNotify$=this.noNotifySubject.asObservable(),this.arrayMessagesSubject=new n.Subject,this.arrayMessages$=this.arrayMessagesSubject.asObservable(),this.activo=new n.BehaviorSubject({}),this.activo$=this.activo.asObservable(),this.timerPing$=n.interval(this.TIME_PING),this.menuActivo=!1,this.listMessage=[],this.notificacion_estado_usuario=[],n.fromEvent(document,"mouseup").subscribe(function(e){o.activo&&0===e.path.map(function(e){return e.localName}).filter(function(e){return"lib-notioas"===e}).length&&o.closePanel()})}return e.prototype.toogleMenuNotify=function(){this.menuActivo=!this.menuActivo;var e={activo:this.menuActivo};this.activo.next(e),this.menuActivo&&this.changeStateNoView()},e.prototype.closePanel=function(){this.menuActivo=!1,this.activo.next({activo:this.menuActivo})},e.prototype.init=function(e){console.info("...Init lib notificaciones"),this.NOTIFICACION_SERVICE=e,this.connect(),this.queryNotification()},e.prototype.getNotificaciones=function(){this.noNotifySubject.next(this.listMessage.filter(function(e){return"enviada"===e.Estado.toLowerCase()}).length),this.arrayMessagesSubject.next(this.listMessage)},e.prototype.getNotificacionEstadoUsuario=function(e){return this.notificacion_estado_usuario.filter(function(o){return o.Id===e})[0]},e.prototype.send_ping=function(){var e=this;this.timerPing$.subscribe(function(){return e.messagesSubject.next("ping")})},e.prototype.connect=function(){var e=this,o=localStorage.getItem("id_token"),t=localStorage.getItem("access_token");if(null!==o&&null!==t&&(this.roles=JSON.parse(atob(o.split(".")[1])).role.filter(function(e){return-1===e.indexOf("/")}),this.user=JSON.parse(atob(o.split(".")[1])).sub,this.roles.length>0)){var n=this.NOTIFICACION_SERVICE+"/join?id="+t;this.messagesSubject=a.webSocket({url:n,openObserver:{next:function(){e.send_ping()}}}),this.messagesSubject.pipe(i.map(function(o){return e.listMessage=u([o],e.listMessage),e.noNotifySubject.next(e.listMessage.filter(function(e){return"enviada"===e.Estado.toLowerCase()}).length),e.arrayMessagesSubject.next(e.listMessage),o})).subscribe(function(e){},function(e){console.info("websocketError:",e)},function(){return console.info("complete")})}},e.prototype.close=function(){this.messagesSubject.unsubscribe()},e.prototype.addMessage=function(e){this.listMessage=u([e],this.listMessage),this.noNotifySubject.next(this.listMessage.filter(function(e){return"enviada"===e.Estado.toLowerCase()}).length),this.arrayMessagesSubject.next(this.listMessage)},e.prototype.changeStateNoView=function(){var e=this;this.listMessage.filter(function(e){return"enviada"===e.Estado.toLowerCase()}).length>=1&&this.confService.post("notificacion_estado_usuario/changeStateNoView/"+this.user,{}).subscribe(function(o){e.listMessage=[],e.queryNotification()})},e.prototype.changeStateToView=function(e,o){var t=this;if("noleida"===o){var i=this.getNotificacionEstadoUsuario(e);this.confService.get("notificacion_estado_usuario/changeStateToView/"+i.Id).subscribe(function(e){t.listMessage=[],t.queryNotification()})}},e.prototype.queryNotification=function(){var e=this,o=localStorage.getItem("id_token"),t=localStorage.getItem("access_token");null!==o&&null!==t&&this.confService.get("notificacion_estado_usuario?query=Usuario:"+this.user+",Activo:true&sortby=notificacion&order=asc&limit=-1").subscribe(function(o){null!==o&&(e.notificacion_estado_usuario=o,n.from(o).subscribe(function(o){if(void 0!==o.Notificacion){var t={Id:o.Id,Type:o.Notificacion.NotificacionConfiguracion.Tipo.Id,Content:JSON.parse(o.Notificacion.CuerpoNotificacion),User:o.Notificacion.NotificacionConfiguracion.Aplicacion.Nombre,Alias:o.Notificacion.NotificacionConfiguracion.Aplicacion.Alias,EstiloIcono:o.Notificacion.NotificacionConfiguracion.Aplicacion.EstiloIcono,FechaCreacion:new Date(o.Notificacion.FechaCreacion),FechaEdicion:new Date(o.Fecha),Estado:o.NotificacionEstado.CodigoAbreviacion};e.addMessage(t)}}))})},e.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:f}]},e.ngInjectableDef=o.ɵɵdefineInjectable({factory:function(){return new e(o.ɵɵinject(f))},token:e,providedIn:"root"}),e}();var g={test:[{nombre:"GAIA - Gestión Administrativa",color:"#8E2825",aplicaciones:[{nombre:"AGORA",url:"https://www.google.com",estilo:"agora-info",descripcion:"Banco de proveedores que apoya procesos de cotización y contratación"},{nombre:"ARGO",url:"https://www.google.com",estilo:"argo-info",descripcion:"Apoyo en la gestión de procesos precontractuales, contractuales y de compras"},{nombre:"ARKA",url:"https://www.google.com",estilo:"arka-info",descripcion:"Gestión de los movimientos de almacén e inventarios apoyando los procesos relacionados a bienes"},{nombre:"CUMPLIDOS",url:"https://pruebascumplidos.portaloas.udistrital.edu.co",estilo:"cumplidos-info",descripcion:"Apoyo de procesos postcontractuales tanto para docentes de vinculacion especial como CPS"},{nombre:"RESOLUCIONES",url:"https://pruebasresoluciones.portaloas.udistrital.edu.co",estilo:"resoluciones-info",descripcion:"Gestión del vinculo contractual de los docentes de vinculación especial apoyando procesos de RRHH"},{nombre:"OIKOS",url:"https://www.google.com",estilo:"oikos-info",descripcion:"Registro y definición de las dependencias y espacios físicos de la universidad distrital"},{nombre:"SISIFO",url:"https://www.google.com",estilo:"sisifo-info",descripcion:"Sistema de gestion de planes de mejoramiento para los procesos académico administrativos"},{nombre:"TEMIS",url:"https://www.google.com",estilo:"temis-info",descripcion:"Apoyo en la definición y cálculo de las cuotas partes pensionales con entidades externas"},{nombre:"PERSEO",url:"https://www.google.com",estilo:"perseo-info",descripcion:"Permitir el desarrollo de procesos electorales dentro de la universidad de forma digital"}]},{nombre:"URANO - Gestión Académica",color:"#15485E",aplicaciones:[{nombre:"JANO",url:"https://www.google.com",estilo:"jano-info",descripcion:"Apoyo en el desarrollo de concursos de mérito para ocupar plazas de planta docente"},{nombre:"KYRON",url:"https://www.google.com",estilo:"kyron-info",descripcion:"Registro y consolidación de información de producción académica de docentes de planta"},{nombre:"POLUX",url:"https://www.google.com",estilo:"polux-info",descripcion:"Apoya la gestion de trabajos de grado"},{nombre:"SGA",url:"https://pruebassga.portaloas.udistrital.edu.co",estilo:"sga-info",descripcion:"Apoya el desarrollo de la misión de la universidad, así como diversos procesos administrativos"},{nombre:"CAMPUS",url:"https://www.google.com",estilo:"campus-info",descripcion:"Campus Virtual para postgrados"},{nombre:"SICIUD",url:"https://www.google.com",estilo:"siciud-info",descripcion:"Una breve descripción acerca de sisiud"}]},{nombre:"NIX - Gestión Financiera",color:"#DE9E0F",aplicaciones:[{nombre:"KRONOS",url:"https://pruebaspresupuesto.portaloas.udistrital.edu.co",estilo:"kronos-info",descripcion:"Apoyar el libre desarrollo de los procesos financieros y reporte de información a entes de control"},{nombre:"TITAN",url:"https://www.google.com",estilo:"titan-info",descripcion:"Construir las diferentes nóminas y pago de honorarios de los compromisos contractuales"}]},{nombre:"ATHENEA - Analíticos",color:"#397A18",aplicaciones:[{nombre:"SPAGOBI",url:"https://www.google.com",estilo:"spagobi-info",descripcion:"Una breve descripción acerca de spagobi"},{nombre:"CIRENE",url:"https://www.google.com",estilo:"cirene-info",descripcion:"Una breve descripción acerca de cirene"},{nombre:"APEA",url:"https://www.google.com",estilo:"apea-info",descripcion:"Una breve descripción acerca de apea"}]}],prod:[{nombre:"GAIA - Gestión Administrativa",color:"#8E2825",aplicaciones:[{nombre:"AGORA",url:"https://www.google.com",estilo:"agora-info",descripcion:"Banco de proveedores que apoya procesos de cotización y contratación"},{nombre:"ARGO",url:"https://www.google.com",estilo:"argo-info",descripcion:"Apoyo en la gestión de procesos precontractuales, contractuales y de compras"},{nombre:"ARKA",url:"https://www.google.com",estilo:"arka-info",descripcion:"Gestión de los movimientos de almacén e inventarios apoyando los procesos relacionados a bienes"},{nombre:"CUMPLIDOS",url:"https://pruebascumplidos.portaloas.udistrital.edu.co",estilo:"cumplidos-info",descripcion:"Apoyo de procesos postcontractuales tanto para docentes de vinculacion especial como CPS"},{nombre:"RESOLUCIONES",url:"https://pruebasresoluciones.portaloas.udistrital.edu.co",estilo:"resoluciones-info",descripcion:"Gestión del vinculo contractual de los docentes de vinculación especial apoyando procesos de RRHH"},{nombre:"OIKOS",url:"https://www.google.com",estilo:"oikos-info",descripcion:"Registro y definición de las dependencias y espacios físicos de la universidad distrital"},{nombre:"SISIFO",url:"https://www.google.com",estilo:"sisifo-info",descripcion:"Sistema de gestion de planes de mejoramiento para los procesos académico administrativos"},{nombre:"TEMIS",url:"https://www.google.com",estilo:"temis-info",descripcion:"Apoyo en la definición y cálculo de las cuotas partes pensionales con entidades externas"},{nombre:"PERSEO",url:"https://www.google.com",estilo:"perseo-info",descripcion:"Permitir el desarrollo de procesos electorales dentro de la universidad de forma digital"}]},{nombre:"URANO - Gestión Académica",color:"#15485E",aplicaciones:[{nombre:"JANO",url:"https://www.google.com",estilo:"jano-info",descripcion:"Apoyo en el desarrollo de concursos de mérito para ocupar plazas de planta docente"},{nombre:"KYRON",url:"https://www.google.com",estilo:"kyron-info",descripcion:"Registro y consolidación de información de producción académica de docentes de planta"},{nombre:"POLUX",url:"https://www.google.com",estilo:"polux-info",descripcion:"Apoya la gestion de trabajos de grado"},{nombre:"SGA",url:"https://pruebassga.portaloas.udistrital.edu.co",estilo:"sga-info",descripcion:"Apoya el desarrollo de la misión de la universidad, así como diversos procesos administrativos"},{nombre:"CAMPUS",url:"https://www.google.com",estilo:"campus-info",descripcion:"Campus Virtual para postgrados"},{nombre:"SICIUD",url:"https://www.google.com",estilo:"siciud-info",descripcion:"Una breve descripción acerca de sisiud"}]},{nombre:"NIX - Gestión Financiera",color:"#DE9E0F",aplicaciones:[{nombre:"KRONOS",url:"https://pruebaspresupuesto.portaloas.udistrital.edu.co",estilo:"kronos-info",descripcion:"Apoyar el libre desarrollo de los procesos financieros y reporte de información a entes de control"},{nombre:"TITAN",url:"https://www.google.com",estilo:"titan-info",descripcion:"Construir las diferentes nóminas y pago de honorarios de los compromisos contractuales"}]},{nombre:"ATHENEA - Analíticos",color:"#397A18",aplicaciones:[{nombre:"SPAGOBI",url:"https://www.google.com",estilo:"spagobi-info",descripcion:"Una breve descripción acerca de spagobi"},{nombre:"CIRENE",url:"https://www.google.com",estilo:"cirene-info",descripcion:"Una breve descripción acerca de cirene"},{nombre:"APEA",url:"https://www.google.com",estilo:"apea-info",descripcion:"Una breve descripción acerca de apea"}]}]},h=function(){function e(e){var o=this;this.configuracionService=e,this.dataFilterSubject=new n.BehaviorSubject([]),this.eventFilter$=this.dataFilterSubject.asObservable(),this.activo=new n.BehaviorSubject({}),this.activo$=this.activo.asObservable(),this.isLogin=!1,this.menuActivo=!1,this.roles=this.getRole(),n.fromEvent(document,"mouseup").subscribe(function(e){o.activo&&0===e.path.map(function(e){return e.localName}).filter(function(e){return"menu-aplicaciones"===e}).length&&o.closePanel()})}return e.prototype.closePanel=function(){this.menuActivo=!1,this.activo.next({activo:this.menuActivo})},e.prototype.getRole=function(){if(null!==window.localStorage.getItem("id_token")){this.isLogin=!0;var e=window.localStorage.getItem("id_token").split(".");return JSON.parse(atob(e[1])).role.map(function(e){return{Nombre:e}})}this.isLogin=!1,this.dataFilterSubject.next(this.categorias)},e.prototype.toogleMenuNotify=function(){this.menuActivo=!this.menuActivo;var e={activo:this.menuActivo};this.activo.next(e)},e.prototype.init=function(e){console.info("...Init lib menu"),this.categorias=e,this.dataFilterSubject.next(this.categorias),this.getAplication()},e.prototype.getAplication=function(){var e=this,o=localStorage.getItem("id_token"),t=localStorage.getItem("access_token");if(null!==o&&null!==t)return this.configuracionService.post("aplicacion_rol/aplicacion_rol",this.roles).subscribe(function(o){var t=e.categorias.map(function(t){return t.aplicaciones=t.aplicaciones.filter(function(t){return e.existe(t.nombre,o)}),t.aplicaciones=t.aplicaciones.map(function(e){return p({},e,{estilo_logo:e.estilo.split("-")[0]})}),t});t=t.filter(function(e){return e.aplicaciones.length>0}),console.info(t),e.dataFilterSubject.next(t)}),this.eventFilter$},e.prototype.existe=function(e,o){return o.filter(function(o){return e.toLowerCase()===o.Nombre.toLowerCase()}).length>0},e.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:f}]},e.ngInjectableDef=o.ɵɵdefineInjectable({factory:function(){return new e(o.ɵɵinject(f))},token:e,providedIn:"root"}),e}();var w=function(){function e(e,o,t){this.confService=e,this.notioasService=o,this.menuService=t}return e.prototype.initLib=function(e){var o=e.CONFIGURACION_SERVICE,t=e.NOTIFICACION_SERVICE,i=e.entorno,n=e.notificaciones,a=e.menuApps;this.confService.setPath(o),n&&this.notioasService.init(t),a&&this.menuService.init(g[i])},e.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:f},{type:m},{type:h}]},e.ngInjectableDef=o.ɵɵdefineInjectable({factory:function(){return new e(o.ɵɵinject(f),o.ɵɵinject(m),o.ɵɵinject(h))},token:e,providedIn:"root"}),e}();var v=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:o.Component,args:[{selector:"lib-utilidades-core",template:"\n    <p>\n      utilidades-core works!\n    </p>\n  "}]}],e.ctorParameters=function(){return[]},e}(),b=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{declarations:[v],imports:[],exports:[v]}]}],e}(),y=function(){function e(e,o){var t=this;this.notificacionService=e,this.router=o,this.searchTerm$=new n.Subject,this.activo=!1,this.notificaciones=[],this.notificacionService.arrayMessages$.subscribe(function(e){t.notificaciones=e}),this.searchTerm$.pipe(i.debounceTime(700),i.distinctUntilChanged(),i.switchMap(function(e){return t.searchEntries(e)})).subscribe(function(e){t.notificaciones=e}),this.notificacionService.getNotificaciones()}return e.prototype.ngOnInit=function(){var e=this;this.notificacionService.activo$.subscribe(function(o){var t=o.activo;e.activo=t})},e.prototype.searchEntries=function(e){var o=[];return o.push(this.notificacionService.listMessage.filter(function(o){return-1!==o.Content.Message.Message.indexOf(e)||-1!==o.User.indexOf(e)})),o},e.prototype.redirect=function(e){this.notificacionService.changeStateToView(e.Id,e.Estado),console.info(e);var o=window.location.origin;-1===e.Content.Message.Link.indexOf(o)?window.open(e.Content.Message.Link,"_blank"):this.router.navigate([e.Content.Message.Link.substring(e.Content.Message.Link.indexOf("#")+1)])},e.decorators=[{type:o.Component,args:[{selector:"lib-notioas",template:'<div id="menu" [ngClass]="{\'aplicaciones_menu_container\': true, \'menu_is_active\': activo }">\n  <div class="title-notifications">\n    <p>Notificaciones</p>\n  </div>\n  <div class="row">\n      <div class="input-group">\n        <input type="text" class="form-control" (keyup)="searchTerm$.next($event.target.value)" placeholder="Search ...">\n        <span class="input-group-append">\n        </span>\n      </div>\n    </div>\n    <br>\n    <div class="notifications-container">\n        <div *ngFor="let notificacion of notificaciones" (click)="redirect(notificacion)"\n        [id]="notificacion.Estado" class="notification-item">\n            <div class="notifications-image-container">\n              <div class="menu-app" [id]="notificacion.EstiloIcono"></div>\n            </div>\n            <div class="notifications-text-container" >\n              <p> {{notificacion.Alias}} </p>\n              <p>\n                {{notificacion.Content.Message.Message}}\n              </p>\n              <p>\n                {{notificacion.FechaCreacion | amLocale:\'es\' | amTimeAgo:true}}\n              </p>\n            </div>\n      </div>\n    </div>\n</div>',styles:['@import url(https://pruebasassets.portaloas.udistrital.edu.co/logo-stylus.css);.aplicaciones_menu_container p{margin-bottom:11px;margin-top:0}.title-notifications{text-align:center;font-family:"Open Sans",sans-serif;font-size:22px}.menu-app{border-radius:7px;border:1px solid;box-shadow:0 0 8px #888}#ENVIADA,#enviada,#noleida{background-color:rgba(43,54,67,.1)}.notification-item{display:flex;flex-direction:row;width:100%;cursor:pointer;align-items:center;justify-content:center}.notifications-image-container{width:25%}.notifications-text-container{width:68%;margin-left:5px}.notifications-text-container p{margin:0;font-family:"Open Sans",sans-serif;color:#000;white-space:normal;font-size:15px}.form-control{margin:0 23px;font-family:"Open Sans",sans-serif;width:86%}.aplicaciones_menu_container{background:#fff;border:1px solid rgba(0,0,0,.2);color:#000;box-shadow:0 2px 10px rgba(0,0,0,.2);position:fixed;top:77px;-webkit-border-radius:2px;right:-100vw;border-radius:2px;overflow-y:auto;overflow-x:hidden;height:calc(-171px + 100vh);width:318px;transition:.3s;padding-top:10px;z-index:1}.menu_is_active{right:0}@media screen and (max-width:1159px){.aplicaciones_menu_container{height:calc(-175px + 100vh)}}@media screen and (max-width:1132px){.aplicaciones_menu_container{height:calc(-180px + 100vh)}}@media screen and (max-width:823px){.aplicaciones_menu_container{height:calc(-193px + 100vh)}}@media screen and (max-width:768px){.aplicaciones_menu_container{height:calc(-217px + 100vh)}}@media screen and (max-width:620px){.aplicaciones_menu_container{height:calc(-280px + 100vh)}}@media screen and (max-width:529px){.aplicaciones_menu_container{height:calc(-298px + 100vh)}}@media screen and (max-width:330px){.aplicaciones_menu_container{height:calc(-288px + 100vh)}}']}]}],e.ctorParameters=function(){return[{type:m},{type:r.Router}]},e}();var S=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{declarations:[y],imports:[s.CommonModule,t.HttpClientModule,r.RouterModule.forRoot([]),c.MomentModule],exports:[y]}]}],e}(),x=function(){function e(){this.bearer={headers:new t.HttpHeaders({Accept:"application/json",authorization:"Bearer "+window.localStorage.getItem("access_token")})}}return e.prototype.init=function(e){if(this.environment=e,null===window.localStorage.getItem("access_token")||void 0===window.localStorage.getItem("access_token")){for(var o={},t=location.hash.substring(1),i=/([^&=]+)=([^&]*)/g,n=void 0;n=i.exec(t);)o[decodeURIComponent(n[1])]=decodeURIComponent(n[2]);var a=new XMLHttpRequest,r="https://"+window.location.host+"?"+t;a.open("GET",r,!0),null!==o.id_token&&void 0!==o.id_token?(window.localStorage.setItem("access_token",o.access_token),window.localStorage.setItem("id_token",o.id_token),window.localStorage.setItem("expires_in",o.expires_in),window.localStorage.setItem("state",o.state)):this.clearStorage(),a.onreadystatechange=function(e){4===a.readyState&&(200===a.status||400===a.status&&window.alert("There was an error processing the token."))}}this.setExpiresAt(),this.timer(),this.clearUrl()},e.prototype.logout=function(){this.logout_url=this.environment.SIGN_OUT_URL,this.logout_url+="?id_token_hint="+window.localStorage.getItem("id_token"),this.logout_url+="&post_logout_redirect_uri="+this.environment.SIGN_OUT_REDIRECT_URL,this.logout_url+="&state="+window.localStorage.getItem("state"),this.clearStorage(),window.location.replace(this.logout_url)},e.prototype.getPayload=function(){var e=window.localStorage.getItem("id_token").split(".");return JSON.parse(atob(e[1]))},e.prototype.logoutValid=function(){for(var e,o,t=!0,i=location.search.substring(1),n=/([^&=]+)=([^&]*)/g;o=n.exec(i);)e=decodeURIComponent(o[2]);return console.info("state: "+e),window.localStorage.getItem("state")===e?(this.clearStorage(),t=!0):t=!1,t},e.prototype.login=function(e){return"undefined"!==window.localStorage.getItem("id_token")&&null!==window.localStorage.getItem("id_token")&&!this.logoutValid()||(e||this.getAuthorizationUrl(),!1)},e.prototype.live=function(){return!!this.login(!0)},e.prototype.clearUrl=function(){var e=window.location.origin+window.location.pathname;window.history.replaceState({},document.title,e)},e.prototype.getAuthorizationUrl=function(){this.params=this.environment,this.params.nonce||(this.params.nonce=this.generateState()),this.params.state||(this.params.state=this.generateState());var e=this.params.AUTORIZATION_URL+"?client_id="+encodeURIComponent(this.params.CLIENTE_ID)+"&redirect_uri="+encodeURIComponent(this.params.REDIRECT_URL)+"&response_type="+encodeURIComponent(this.params.RESPONSE_TYPE)+"&scope="+encodeURIComponent(this.params.SCOPE)+"&state_url="+encodeURIComponent(window.location.hash);return this.params.nonce&&(e+="&nonce="+encodeURIComponent(this.params.nonce)),e+="&state="+encodeURIComponent(this.params.state),window.location.replace(e),e},e.prototype.generateState=function(){var e=((Date.now()+Math.random())*Math.random()).toString().replace(".","");return l.Md5.hashStr(e)},e.prototype.setExpiresAt=function(){if(null===window.localStorage.getItem("expires_at")||void 0===window.localStorage.getItem("expires_at")||"Invalid Date"===window.localStorage.getItem("expires_at")){var e=new Date;e.setSeconds(e.getSeconds()+parseInt(window.localStorage.getItem("expires_in"),10)-60),window.localStorage.setItem("expires_at",e.toUTCString())}},e.prototype.expired=function(){return new Date(window.localStorage.getItem("expires_at"))<new Date},e.prototype.timer=function(){var e=this;setInterval(function(){null!==window.localStorage.getItem("expires_at")?e.expired()&&(e.logout(),e.clearStorage()):window.location.reload()},5e3)},e.prototype.clearStorage=function(){window.localStorage.removeItem("access_token"),window.localStorage.removeItem("id_token"),window.localStorage.removeItem("expires_in"),window.localStorage.removeItem("state"),window.localStorage.removeItem("expires_at")},e.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=o.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();var I=function(){function e(e,o,t){var i=this;this.menuService=e,this.notioasService=o,this.router=t,this.categorias=[],this.menuService.eventFilter$.subscribe(function(e){i.categorias=e})}return e.prototype.redirect=function(e){var o=window.location.origin;-1===e.indexOf(o)?window.open(e,"_blank"):this.router.navigate([e.substring(e.indexOf("#")+1)])},e.prototype.ngOnInit=function(){var e=this;this.menuService.activo$.subscribe(function(o){var t=o.activo;e.activo=t})},e.decorators=[{type:o.Component,args:[{selector:"menu-aplicaciones",template:'<div id="menu" [ngClass]="{\'aplicaciones_menu_container\': true, \'menu_is_active\': activo }">\n  <div class="container-aplicativos">\n    <article *ngFor="let categoria of categorias" class="card">\n      <div class="title-app-menu-div" [ngStyle]="{\'background-color\': categoria.color}">\n        <h5 class="categoria-title" >{{categoria.nombre}}</h5>\n      </div>\n      <div class="app-image-container">\n        <div *ngFor="let aplicacion of categoria.aplicaciones" class="image-application" (click)="redirect(aplicacion.url)">\n            <img class="menu-app" [id]="aplicacion.estilo_logo">\n        </div>\n      </div>\n    </article>\n  </div>\n</div>',styles:['@import url(https://pruebasassets.portaloas.udistrital.edu.co/logo-stylus.css);.aplicaciones_menu_container p{margin-bottom:11px;margin-top:0}.title-notifications{text-align:center;font-family:"Open Sans",sans-serif;font-size:22px}.menu-app{border-radius:7px;border:1px solid;box-shadow:0 0 8px #888}#ENVIADA,#enviada,#noleida{background-color:rgba(43,54,67,.1)}.notification-item{display:flex;flex-direction:row;width:100%;cursor:pointer;align-items:center;justify-content:center}.notifications-image-container{width:25%}.notifications-text-container{width:68%;margin-left:5px}.notifications-text-container p{margin:0;font-family:"Open Sans",sans-serif;color:#000;white-space:normal;font-size:15px}.form-control{margin:0 23px;font-family:"Open Sans",sans-serif;width:86%}.title-app-menu-div{text-align:center;margin-bottom:5px;font-size:21px;font-family:"Open Sans",sans-serif}.aplicaciones_menu_container{background:#fff;border:1px solid #d6dae1;color:#000;box-shadow:1px 0 17px #888;position:fixed;top:77px;-webkit-border-radius:2px;right:-100vw;border-radius:2px;overflow-y:auto;overflow-x:hidden;height:560px;width:320px;transition:.3s;z-index:1}.menu_is_active{right:0}.app-image-container{display:flex;justify-content:space-evenly;flex-wrap:wrap;align-items:center}.image-application{width:30%;margin-bottom:10px;display:flex;flex-wrap:wrap;justify-content:center}.categoria-title{color:#fff}']}]}],e.ctorParameters=function(){return[{type:h},{type:m},{type:r.Router}]},e}();var _=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{declarations:[I],imports:[s.CommonModule],exports:[I]}]}],e}();e.ImplicitAutenticationService=x,e.MenuAplicacionesComponent=I,e.MenuAplicacionesModule=_,e.MenuAplicacionesService=h,e.NotioasComponent=y,e.NotioasModule=S,e.NotioasService=m,e.UtilidadesCoreComponent=v,e.UtilidadesCoreModule=b,e.UtilidadesCoreService=w,e.ɵa=f,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=utilidades-core.umd.min.js.map